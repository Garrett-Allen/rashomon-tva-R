---
title: "rashomon_example_vignette"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{rashomon_example_vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
library(rashomontva)
library(collections)
library(magrittr)
library(dplyr)
```

#todo add examples

```{r}
# M = 2
# R = c(3,4)

```

```{r}
data <- read.csv("output.csv") %>%
  rename(
    arm1 = "X0",
    arm2 = "X1",
    arm3 = "X2",
    id = "X",
    observation = "Y"
  ) %>%
  select(-D)

M <- 3
R <- c(4, 3, 3)
H <- Inf
theta <- 13
lamb <- 1

data <- assign_universal_label(data, arm1, arm2, arm3)

begin <- Sys.time()
rset <- aggregate_rashomon_profiles(data,
  arm1,
  arm2,
  arm3,
  M = M,
  H = H,
  R = R,
  reg = lamb,
  value = observation,
  theta = theta
)
end <- Sys.time()

print(end - begin)

#speed ups:

#data table usage instead of data.frame
#predict implemented

predict(rset[[1]],data)
```




